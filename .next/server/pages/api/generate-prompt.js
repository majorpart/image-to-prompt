"use strict";(()=>{var e={};e.id=7,e.ids=[7],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6249:(e,t)=>{Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,r){return r in t?t[r]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,r)):"function"==typeof t&&"default"===r?t:void 0}}})},2403:(e,t,r)=>{r.r(t),r.d(t,{config:()=>l,default:()=>u,routeModule:()=>d});var n={};r.r(n),r.d(n,{default:()=>i});var o=r(1802),a=r(7153),s=r(6249);async function i(e,t){if("POST"!==e.method)return t.status(405).json({error:"Method not allowed"});try{let r;let{imageBase64:n,language:o,structuredPrompt:a}=e.body;if(!n)return t.status(400).json({error:"Image data is required"});let s=process.env.API_KEY;if(!s)return t.status(500).json({error:"API key not configured"});let i={en:"英语",es:"西班牙语",de:"德语",fr:"法语",pt:"葡萄牙语","zh-cn":"简体中文","zh-tw":"繁体中文",ar:"阿拉伯语",ru:"俄语",ja:"日语",ko:"韩语"}[o]||"英语";r="yes"===a?`你是一名专业AI绘画提示词工程师。请严格按以下结构化格式分析图片并生成${i} 提示词，无需思考过程，直接输出结果，回复中统一只有一种语言。主体:[描述图片核心对象：人物/动物/物体/场景的具体特征，包括性别、年龄、种族、姿势、动作、表情等]。外观细节:[描述主体的外貌特征、服装款式、发型设计、手持道具、佩戴配饰等具体细节]。环境背景:[说明场景的具体位置与环境特征，如森林深处、未来都市、奇幻空间等；描述光线效果与氛围，如柔光晨雾、霓虹夜景、戏剧性灯光等]。风格质感：[指定艺术风格：写实/赛博朋克/动漫/水彩等；定义色调倾向：冷色调/暖色调/高对比度/单色等]。上面结构中的主体、外观细节、环境背景、风格质感等结构上的词也要用${i} 来表达。`:`你是一名专业AI绘画提示词工程师。请根据我的描述，直接生成一段高质量、精炼且可直接用于AI文生图的${i}提示词。无需思考过程，无需段落标题或编号，只需生成一段连贯的、包含所有必要细节的纯文本提示词。内容必须按以下逻辑顺序组织，并确保包含所有方面：主体核心： 首先描述核心对象（人物、动物、物体等）的外观、动作、表情和服饰。场景氛围： 接着说明环境背景、光线和色彩氛围。风格技术： 最后指定艺术风格、参考艺术家（如适用）。请将所有以上元素无缝衔接为一段流畅的文字。`;let u=await fetch("https://api.siliconflow.cn/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({model:"deepseek-v3",messages:[{role:"user",content:[{type:"text",text:r},{type:"image_url",image_url:{url:`data:image/jpeg;base64,${n}`}}]}],max_tokens:2e3,temperature:.7})});if(!u.ok){let e=await u.text();return console.error("API Error:",e),t.status(u.status).json({error:"Failed to generate prompt",details:e})}let l=await u.json(),d=l.choices?.[0]?.message?.content||"";return t.status(200).json({prompt:d})}catch(e){return console.error("API Error:",e),t.status(500).json({error:"Internal server error"})}}let u=(0,s.l)(n,"default"),l=(0,s.l)(n,"config"),d=new o.PagesAPIRouteModule({definition:{kind:a.x.PAGES_API,page:"/api/generate-prompt",pathname:"/api/generate-prompt",bundlePath:"",filename:""},userland:n})},7153:(e,t)=>{var r;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return r}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(r||(r={}))},1802:(e,t,r)=>{e.exports=r(145)}};var t=require("../../webpack-api-runtime.js");t.C(e);var r=t(t.s=2403);module.exports=r})();